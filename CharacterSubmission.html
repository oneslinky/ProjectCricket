<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset="UTF-8">
        <title>CharacterSubmission</title>
        <link rel="stylesheet" href="StyleSheet.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Tektur:wght@400..900&display=swap" rel="stylesheet">
        <style>
            body { font-family: 'Tektur', sans-serif;}
            #timer {font-size: 48px; font-weight: bold;}
            .overlay {
                display: none;
                position: fixed;
                top:0; left: 0;
                width: 100%; height: 100%;
                background: rgba(27, 5, 60, 0.4);
                justify-content: center;
                align-items: center;
                z-index: 1000;
            }
            .popup{
                background: rgbargba(81, 67, 209, 1);
                padding: 20px;
                border-radius: 5px;
                text-align: center;
                width: 50000 px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            }
            .popup button{
                margin-top: 20px;
                padding: 10px 20px;
                border: none;
                background: rgba(78, 150, 209, 0.8);
                color: rgba(9, 122, 209, 1);
                border-radius: 5px;
                cursor: pointer;
                font-size: 13 px;
            } 
            .popup button:hover{
                background: rgba(67, 209, 206, 1)
            }
        </style>
    </head>
    <body>
        <!--insert the thematic of the webpage and other required things-->
        <h1>
           <strong>Welcome to Multiverse All Star Battlefront</strong> 
        </h1>
        <div id = "timer">0:10</div>
        <p>
            You have 5 minutes to describe your character. 
            Please be as descriptive as possible. You can include their stats, 
            fighting style, memorable strengths and weaknesses, and any other relevant information.
            Once the timer hits zero, you will be prompted to submit your description or reset if you aren't pleased with your description.
        </p>
        <textarea id="description" rows="25" cols="175" placeholder="Type your description here..."></textarea>
        <br>
        <button id="submitBtn">Submit</button> 
        <button id="resetBtn">Reset</button>   
        <div id= "popupOverlay" class= "overlay">
            <div class="popup">
                <h2>Time's Up!</h2>
                <p>Your time is up. Please click the submit button if you are satisfied 
                    with your description or click reset to try again.
                </p>
                <button onclick="document.getElementById('popupOverlay').style.display='none';">Close</button>
            </div>
         </div>

        <script>
            let resetBtn = document.getElementById('resetBtn');
            let submitBtn = document.getElementById('submitBtn');
            let countdownTime = 10;
            let timeleft = countdownTime;
            let descriptionBox = document.getElementById('description');
            let timerDisply = document.getElementById('timer');
            let timerRunning = false;
            let countdown;
            resetBtn.disabled = true;

            descriptionBox.addEventListener('input', startTimer);

            function startTimer(){
                if(timerRunning){
                    return;
            }
            timerRunning = true;
            descriptionBox.diabled = false;
            let countdown = setInterval(()=>{
                let minutes = Math.floor(timeleft / 60);
                let seconds = timeleft % 60;
                seconds = seconds < 10 ? '0' + seconds : seconds;
                timerDisply.textContent = `${minutes}:${seconds}`;
                timeleft--;

                if(timeleft <= 0){
                    timeleft = 0;
                    timerDisply.textContent = "0:00";
                    clearInterval(countdown);
                    showPopup();
                    descriptionBox.disabled = true;
                    timerRunning = false;
                    resetBtn.disabled = false;
                }
            }, 1000);
        }
        function showPopup(){
            document.getElementById('popupOverlay').style.display = 'flex';
        }


        submitBtn.addEventListener('click', function(){
            let description = descriptionBox.value;
            if(description.trim() === ''){
                alert('Please enter a description before submitting.');
                return;
            }
            alert('Description submitted successfully!');
            descriptionBox.disabled = true;
            window.location.href = 'CharacterStats.html';
            clearInterval(countdown);
            timerRunning = false;
        });

        resetBtn.addEventListener('click', function(){
            clearInterval(countdown);
            timeleft = countdownTime;
            timerDisply.textContent = "0:10";
            descriptionBox.value = '';
            descriptionBox.disabled = false;
            timerRunning = false;
        })
        </script>
    </body>
</html>